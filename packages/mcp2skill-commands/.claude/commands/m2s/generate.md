---
description: Interactively generate Claude Code skill from MCP server
argument-hint: <server-name>
allowed-tools: Bash(mcp2scripts:*), Bash(ls:*), Bash(cat:*), Bash(head:*), Bash(npm:*), Read, Write, AskUserQuestion
---

Generate a Claude Code skill for MCP server "$1" with LLM-enhanced documentation following best practices.

**Reference:** ./docs/skill-authoring-guide.md for all best practices to follow.

## Step 1: Analyze the MCP server

Use Bash to get tool information: `mcp2scripts tools $1`

Parse the output to extract:
- Total tool count
- Tool names and descriptions
- Required vs optional parameters
- Identify patterns in tool names (click, fill, page, navigate, etc.)

## Step 2: Detect domain and complexity

**Analyze tool patterns to detect domain:**
- Browser automation: new_page, click, fill, navigate, screenshot
- File operations: read_file, write_file, list_directory
- Design tools: get_design, export_assets, get_screenshot
- API/Data: query, fetch, update, delete

**Determine complexity level:**
- **Simple (≤10 tools):** Single SKILL.md, basic categorization
- **Complex (>10 tools):** Needs grouping, progressive disclosure, reference files

## Step 3: Ask where to generate the skill

Use AskUserQuestion to prompt for skill location:

**Question:** "Where should this skill be generated?"

**Options:**
1. **Project skills** (`./.claude/skills/`) - **RECOMMENDED DEFAULT**
   - Description: "Available in this project. Use for project-specific integrations or testing skills. You can promote to user-level later if needed."

2. **User skills** (`~/.claude/skills/`)
   - Description: "Available globally across all projects. Use for general-purpose tools you'll use everywhere (browser automation, file operations, etc.)"

**Store the answer** in a variable for use in subsequent steps:
- If user chooses "Project skills": `SKILL_PATH=./.claude/skills` (and use `mcp2scripts generate $1`)
- If user chooses "User skills": `SKILL_PATH=~/.claude/skills` (and use `mcp2scripts generate $1 --user`)

## Step 4: For Complex skills (>10 tools) - Suggest grouping

Analyze all tools and propose logical groupings:

**Example analysis for chrome-devtools (26 tools):**
```
Group 1: Page Management (6 tools)
  - new_page, list_pages, close_page, navigate, reload, screenshot

Group 2: Element Interaction (8 tools)
  - click, fill, hover, drag, select, submit_form, upload_file, clear

Group 3: Inspection & Debug (7 tools)
  - take_snapshot, get_console, evaluate_script, get_html, get_styles, monitor_network

Group 4: Advanced (5 tools)
  - inject_script, set_cookies, get_cookies, emulate_device, capture_video
```

**Present structure to user:**
- Show proposed groups
- Explain rationale (why these tools go together)
- Ask: "Does this grouping make sense, or would you like to adjust it?"
- Allow user to:
  - Accept as-is
  - Merge groups
  - Split groups further
  - Rename groups

## Step 5: Generate JavaScript scripts

Use Bash to run the appropriate command based on user's choice from Step 3:
- For project skills: `mcp2scripts generate $1`
- For user skills: `mcp2scripts generate $1 --user`

This creates:
- `$SKILL_PATH/mcp-$1/scripts/` directory
- `package.json` - Node.js dependencies (axios, commander)
- `mcp_client.js` - Shared REST client
- One JavaScript script per tool (with commander.js)

Use Glob to verify scripts were created: `$SKILL_PATH/mcp-$1/scripts/*.js`

## Step 5a: Install dependencies

**IMPORTANT**: After generating the scripts, install the required dependencies:

Use Bash: `cd $SKILL_PATH/mcp-$1/scripts && npm install`

This installs:
- `axios` - For HTTP requests to mcp2rest
- `commander` - For CLI argument parsing

Verify the installation completed successfully before proceeding.

## Step 6: Create SKILL.md with best practices

**Read the existing SKILL.md** (if generated by mcp2scripts) using Read tool: `$SKILL_PATH/mcp-$1/SKILL.md`

**Now enhance it** following ./docs/skill-authoring-guide.md:

### YAML Frontmatter
```yaml
---
name: mcp-$1
description: [Write clear, specific description mentioning key capabilities and when to use]
---
```

### Content structure (keep under 500 lines!)

**For Simple skills (≤10 tools):**
```markdown
# {Server Name} Skill

{1-2 paragraph overview of what this skill does}

## Prerequisites
- mcp2rest running on http://localhost:28888
- {server-name} server loaded
- {any server-specific requirements}

## Quick Start

{Provide a realistic, minimal example using 2-3 tools}

Example:
Input: {specific input}
Output: {expected output}

## Available Tools

### {Category 1}
- **tool_name** - Description
  - Required: --param1 --param2
  - Optional: [--param3]
  - Example: `node scripts/tool_name.js --param1 value --param2 value`

{Repeat for all categories}

## Common Workflows

### {Workflow 1 Name}
1. [ ] Step one with specific tool
2. [ ] Step two with specific tool
3. [ ] Step three with verification

Example:
{Show actual commands with real values}

### {Workflow 2 Name}
{Same pattern}

## Troubleshooting

{Common issues and solutions}
```

**For Complex skills (>10 tools):**
Create main SKILL.md + reference files:

**SKILL.md** (~150-200 lines):
```markdown
# {Server Name} Skill

{Overview and value proposition}

## Prerequisites

{Setup requirements}

## Quick Start

{Minimal getting-started example}

## Tool Groups

This skill provides {X} tools organized into {N} groups:

1. **{Group 1}** - {Brief description}
   - See: @workflows/{group1}.md for details

2. **{Group 2}** - {Brief description}
   - See: @workflows/{group2}.md for details

{List all groups}

## Common Workflows

{2-3 most common workflows with checklists}

## Reference

- Complete tool listing: @reference/all-tools.md
- Advanced workflows: @workflows/advanced.md
- Troubleshooting: @reference/troubleshooting.md

{Progressive disclosure - details in separate files}
```

**Create reference files:**
- `workflows/{group-name}.md` - Detailed workflows for each group
- `reference/all-tools.md` - Complete tool listing with examples
- `reference/troubleshooting.md` - Common issues

## Step 6: Generate realistic workflow examples

For each major workflow, create:

**Input/Output pairs** (not abstractions):
```markdown
### Example: Fill login form

Input:
- Email field UID: email_input_abc123
- Password field UID: pass_input_def456
- Submit button UID: submit_btn_ghi789

Steps:
```bash
node scripts/fill.js --uid email_input_abc123 --value user@example.com
node scripts/fill.js --uid pass_input_def456 --value secretpass
node scripts/click.js --uid submit_btn_ghi789
```

Expected output:
- Form submitted successfully
- Navigation to /dashboard
```

**Checklists for multi-step operations:**
```markdown
## Workflow: Complete form automation

- [ ] Open target page: `node scripts/new_page.js --url URL`
- [ ] Get page structure: `node scripts/take_snapshot.js`
- [ ] Identify form element UIDs from snapshot
- [ ] Fill form fields with `fill.js` (repeat for each field)
- [ ] Submit form: `node scripts/click.js --uid submit_btn_uid`
- [ ] Verify success: `node scripts/take_screenshot.js`
```

## Step 7: Validate against best practices

Check the generated SKILL.md against ./docs/skill-authoring-guide.md:

**Core Quality Checklist:**
- [ ] Description is specific and actionable (under 1024 chars)
- [ ] SKILL.md under 500 lines (or split into references)
- [ ] Concrete examples with input/output pairs
- [ ] Checklists for multi-step workflows
- [ ] Consistent terminology throughout
- [ ] References are one-level deep only
- [ ] Workflows have validation/verification steps

**Content Quality:**
- [ ] No abstract descriptions, only concrete examples
- [ ] Forward slashes in all paths
- [ ] Realistic workflow examples (not generic)
- [ ] Error cases documented
- [ ] State persistence explained (if applicable)

## Step 8: Preview and iterate

Use Read tool to show the first 50 lines of SKILL.md: `$SKILL_PATH/mcp-$1/SKILL.md` (with limit=50)

Ask: "How does this look? Any improvements or changes needed?"

**If user wants changes:**
- Gather feedback
- Regenerate improved version
- Show preview again

**If user approves:**
- Proceed to finalization

## Step 9: Create reference files (for complex skills)

If tool count >10 and user approved grouping:

**For each group, create `workflows/{group-name}.md`:**
```markdown
# {Group Name} Tools

Detailed workflows using {group name} tools.

## Tools in this group

{List tools with full parameters}

## Workflows

### {Workflow 1}
{Detailed steps with checklist}

### {Workflow 2}
{Detailed steps with checklist}

## Examples

{Multiple realistic examples}
```

**Create `reference/all-tools.md`:**
Complete alphabetical tool listing with all parameters and examples.

**Create `reference/troubleshooting.md`:**
Common issues and solutions specific to this server.

## Step 10: Finalize

Summary of what was created:
```
✓ Generated skill: $SKILL_PATH/mcp-$1/

Structure:
  SKILL.md ({line-count} lines)
  scripts/ ({tool-count} tools + 1 shared client)
  {if complex: workflows/ (X files)}
  {if complex: reference/ (Y files)}
```

**Next steps:**
1. Dependencies installed: `npm install` completed successfully
2. Claude Code auto-discovers skills in `./.claude/skills/` (project) and `~/.claude/skills/` (user)
3. Test the skill: Try using the tools via JavaScript scripts
4. Iterate: Use `/m2s:update $1` to improve the skill
5. Share: Skills can be distributed via git

**Verification:**
"Try asking me to use the $1 skill and I'll automatically discover and use it!"

## Important Notes

**Follow skill-authoring-guide.md throughout:**
- Conciseness is critical (500-line limit for SKILL.md)
- Use progressive disclosure for complex skills
- Provide concrete examples, not abstractions
- Include validation/verification steps
- Use checklists for multi-step operations
- One-level deep references only

**LLM-enhanced means:**
- Analyze actual tool descriptions intelligently
- Generate realistic, domain-specific examples
- Suggest appropriate groupings based on patterns
- Create workflows that make sense for the domain
- Not just templates, but thoughtful documentation
